<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>√ânigme Algorithmique - Le Code S√©quentiel (Final S√©curis√©)</title>
<style>
/* Style Terminal de Logique */
:root {
  --bg: #000a12;
  --card: #1c2730;
  --accent: #00ffaa; /* Vert Terminal */
  --light: #b0e0e6;
  --error: #ff5733;
}

html, body {
  height: 100%;
  margin: 0;
  font-family: 'Consolas', 'Courier New', monospace;
  background-color: var(--bg);
  color: var(--accent);
  line-height: 1.5;
}

.wrap {
  max-width: 850px;
  margin: 30px auto;
  padding: 20px;
  border-radius: 8px;
  background: var(--card);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
  border: 2px solid var(--accent);
}

header h1 {
  color: var(--accent);
  text-align: center;
  margin-bottom: 5px;
  font-size: 1.8rem;
}

.lead {
  text-align: center;
  font-style: italic;
  margin-top: 0;
  color: var(--light);
}

.sequence {
    text-align: center;
    font-size: 1.5rem;
    padding: 10px;
    border: 1px dashed var(--accent);
    margin: 15px 0;
    color: var(--light);
}

.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-top: 20px;
}

.panel {
  padding: 15px;
  border: 1px solid rgba(0, 255, 170, 0.3);
  border-radius: 4px;
}

h3 {
    color: var(--light);
    border-bottom: 1px solid rgba(0, 255, 170, 0.3);
    padding-bottom: 5px;
}

.input-group {
    margin-top: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.input-group label {
    color: var(--accent);
}
.input-group input {
    padding: 10px;
    border: 1px solid var(--accent);
    background: #000a12;
    color: var(--light);
    font-family: monospace;
    font-size: 1.1rem;
    width: calc(100% - 22px);
    text-align: center;
    text-transform: uppercase;
}
.btn {
    padding: 10px 15px;
    background: var(--accent);
    color: var(--bg);
    border: none;
    font-weight: bold;
    cursor: pointer;
    border-radius: 4px;
    margin-top: 10px;
}

/* Zone de Validation Finale */
.validation-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px 15px;
    text-align: center;
    border: 1px solid rgba(0, 255, 170, 0.3);
    border-radius: 4px;
    height: 300px;
}

.final-reveal {
  margin-top: 25px;
  padding: 15px;
  border: 3px solid #f7d58b;
  background: rgba(247, 213, 139, 0.1);
  color: #f7d58b;
  font-size: 1.5rem;
  font-weight: bold;
  text-align: center;
  display: none;
}

#conversionHint {
    margin-top: 10px;
    color: var(--light);
    font-style: italic;
    font-size: 0.9em;
}

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Enigme 3 Analyse S√©quentielle</h1>
      <p class="lead">Le code final est une combinaison .. .... ......., trouv√©es gr√¢ce aux r√©sultats des deux algorithmes.</p>
    </header>

    <div class="sequence">
        S√âQUENCE DE D√âPART : [3, 8, 2, 1, 4, 7]
    </div>

    <div class="grid">
      <div class="panel">
        <h3>R√®gles d'Algorithme</h3>
        <p><strong>Premier Code :</strong></p>
        <ol>
            <li>Prendre les trois premiers nombres (3, 8, 2).</li>
            <li>Multiplier les trois nombres entre eux.</li>
            <li>Soustraire 34 au r√©sultat obtenu.</li>
        </ol>
        
        <p><strong>Second Code :</strong></p>
        <ol>
            <li>Prendre les trois derniers nombres (1, 4, 7).</li>
            <li>Additionner les trois nombres.</li>
            <li>Soustraire 7 au total.</li>
        </ol>
      </div>

      <div class="validation-panel">
        <h3>Saisie du Code Final</h3>

        <div class="input-group" style="width: 100%; max-width: 200px;">
            <label for="finalCodeInput">R√©ponse :</label>
            <input type="text" id="finalCodeInput" placeholder="" maxlength="2" />

            <button class="btn" onclick="checkFinalCode()">V√©rifier Code Secret</button>
        </div>
        <!-- <p id="conversionHint">*Indice : A=1, B=2, C=3...</p> -->

        <div class="final-reveal" id="finalReveal"></div>
        <p id="feedback" style="margin-top: 10px; color: var(--error);"></p>
      </div>
    </div>
  </div>

<script>
    const finalCodeInput = document.getElementById('finalCodeInput');
    const finalReveal = document.getElementById('finalReveal');
    const feedback = document.getElementById('feedback');
    
    // La s√©quence de d√©part est d√©finie ici pour la logique de v√©rification
    const SEQUENCE = [3, 8, 2, 1, 4, 7]; 
    
    /**
     * Calcule le r√©sultat attendu pour le Premier Code (14)
     */
    function calculateTarget1() {
        const [a, b, c] = SEQUENCE.slice(0, 3); 
        return (a * b * c) - 34;
    }

    /**
     * Calcule le r√©sultat attendu pour le Second Code (5)
     */
    function calculateTarget2() {
        const [d, e, f] = SEQUENCE.slice(3, 6); 
        return (d + e + f) - 7;
    }

    function letterToNumber(letter) {
        // Convertit une lettre (A-Z) en son √©quivalent num√©rique (1-26)
        return letter.charCodeAt(0) - 'A'.charCodeAt(0) + 1;
    }

   function checkFinalCode() {
    const code = finalCodeInput.value.toUpperCase().trim();
    
    feedback.textContent = ''; // Efface le feedback pr√©c√©dent

    if (code.length !== 2) {
        feedback.style.color = 'var(--error)';
        feedback.textContent = 'Veuillez entrer exactement deux lettres (Ex: AB).';
        return;
    }

    // 1. D√©terminer les r√©sultats num√©riques cibles
    const TARGET_1 = calculateTarget1(); 
    const TARGET_2 = calculateTarget2(); 
    
    // 2. Convertir la r√©ponse du joueur en nombres
    const playerNum1 = letterToNumber(code[0]);
    const playerNum2 = letterToNumber(code[1]);

    // 3. V√©rifier la correspondance
    if (playerNum1 === TARGET_1 && playerNum2 === TARGET_2) {
        finalReveal.style.display = 'block';
        finalReveal.innerHTML = `CODE VALID√â : <strong>${code}</strong> <br> Acc√®s √† la prochaine √©nigme d√©bloqu√© !`;
        finalCodeInput.disabled = true;
        document.querySelector('.btn').disabled = true;
        feedback.style.color = 'var(--accent)';
        feedback.textContent = 'SUCC√àS : Algorithme r√©solu !';

        // üîÅ Redirection automatique apr√®s 2 secondes
        setTimeout(() => {
            window.location.href = '../4/index.html'; // <-- change ici le lien vers ta prochaine page
        }, 2000);
    } else {
        feedback.style.color = 'var(--error)';
        feedback.textContent = `CODE INCORRECT : "${code}". V√©rifiez vos calculs num√©riques (attendu: ${playerNum1}/${playerNum2} au lieu de ${TARGET_1}/${TARGET_2}).`;
    }
}

    
</script>
</body>
</html>